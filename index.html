<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Audio Structure Visualizer</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1>Audio Structure Visualizer</h1>

        <div class="controls">
            <div class="control-group">
                <label for="audioFile">Audio File:</label>
                <input type="file" id="audioFile" accept="audio/*">
            </div>

            <div class="control-group">
                <label for="bpm">BPM:</label>
                <input type="number" id="bpm" value="120" min="1" max="300" step="0.1">
            </div>

            <div class="control-group">
                <label for="samplesPerBeat">Samples per Beat:</label>
                <select id="samplesPerBeat">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="4">4</option>
                    <option value="8">8</option>
                    <option value="16">16</option>
                    <option value="32">32</option>
                    <option value="64" selected>64</option>
                    <option value="128">128</option>
                    <option value="256">256</option>
                    <option value="512">512</option>
                </select>
            </div>

            <div class="control-group">
                <label for="windowSize">Window Size (samples):</label>
                <input type="number" id="windowSize" value="2048" min="128" max="8192" step="128">
            </div>

            <div class="control-group">
                <label for="zOrderOffset">Z-Order Offset (beats):</label>
                <input type="number" id="zOrderOffset" value="0" step="0.1">
            </div>

            <div class="control-group">
                <label for="vizMode">Visualization Mode:</label>
                <select id="vizMode">
                    <option value="mono">Mono (Power - Viridis)</option>
                    <option value="rgb">RGB (Frequency Bands)</option>
                </select>
            </div>

            <div class="control-group" id="filterControlsGroup" style="display: none;">
                <label style="display: block; margin-bottom: 10px; font-weight: bold;">Frequency Band Cutoffs:</label>
                <div style="margin-left: 180px;">
                    <div style="margin-bottom: 8px;">
                        <label style="width: 120px;">Low/Mid (Hz):</label>
                        <input type="number" id="lowMidCutoff" value="250" min="50" max="1000" step="10">
                    </div>
                    <div style="margin-bottom: 8px;">
                        <label style="width: 120px;">Mid/High (Hz):</label>
                        <input type="number" id="midHighCutoff" value="4000" min="1000" max="12000" step="100">
                    </div>
                    <div style="font-size: 12px; color: #888; margin-top: 5px;">
                        Red: Low (20 - <span id="lowMidDisplay">250</span> Hz)<br>
                        Green: Mid (<span id="lowMidDisplay2">250</span> - <span id="midHighDisplay">4000</span> Hz)<br>
                        Blue: High (<span id="midHighDisplay2">4000</span> - 20000 Hz)
                    </div>
                </div>
            </div>

            <div class="control-group">
                <button id="processButton" disabled>Process</button>
            </div>

            <div class="control-group info" id="calculatedInfo">
                Window interval: -- ms | Canvas size: --
            </div>
        </div>

        <div class="canvas-container">
            <canvas id="visualizer" style="display: none;"></canvas>

            <div class="progress-container" id="progressContainer">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill">0%</div>
                </div>
            </div>

            <!-- Overlay canvas for marker (positioned absolutely over main canvas) -->
            <canvas id="markerOverlay" style="position: absolute; pointer-events: none; border: 1px solid #444; display: none;"></canvas>
        </div>

        <!-- Playback Controls -->
        <div class="playback-controls" id="playbackControls" style="display: none;">
            <div class="playback-buttons">
                <button id="playPauseButton">Play</button>
            </div>
            <div class="playback-seek">
                <input type="range" id="seekSlider" min="0" max="100" value="0" step="0.01">
            </div>
            <div class="playback-time">
                <span id="currentTime">0:00</span> / <span id="totalTime">0:00</span>
            </div>
        </div>
    </div>

    <script src="dist/app.js"></script>
</body>
</html>
